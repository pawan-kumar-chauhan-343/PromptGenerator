<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI DanceGen Turbo | PoorDogy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        dark: {
                            bg: '#0a0a0f',
                            card: '#13131f',
                            border: '#2a2a35'
                        },
                        brand: {
                            teal: '#2dd4bf',
                            blue: '#3b82f6',
                            purple: '#a855f7'
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'slide-up': 'slideUp 0.3s ease-out forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050508;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            color: #e2e8f0;
            overflow-x: hidden;
        }

        /* Glassmorphism Classes */
        .glass-panel {
            background: rgba(20, 20, 25, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .glass-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s ease;
        }

        .glass-input:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: #2dd4bf;
            box-shadow: 0 0 15px rgba(45, 212, 191, 0.2);
            outline: none;
        }

        .error-border {
            border-color: #ef4444 !important;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.3) !important;
        }

        /* Chat Widget Specifics */
        .chat-bubble-user {
            background: linear-gradient(135deg, #2dd4bf, #3b82f6);
            color: white;
            border-radius: 12px 12px 0 12px;
        }
        .chat-bubble-ai {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border-radius: 12px 12px 12px 0;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .chat-maximized {
            width: 90vw !important;
            height: 80vh !important;
            right: 5vw !important;
            bottom: 5vh !important;
        }

        /* Mobile Optimization for Selects */
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
            -webkit-appearance: none;
            appearance: none;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- BACKGROUND GLOW EFFECTS -->
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-900/20 rounded-full blur-[120px] animate-pulse-slow"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-teal-900/20 rounded-full blur-[120px] animate-pulse-slow"></div>
    </div>

    <!-- NAVBAR -->
    <nav class="sticky top-0 z-50 glass-panel border-b-0 border-b-white/5">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo Area -->
                <a href="https://www.youtube.com/@poordogy-c1p" target="_blank" class="flex items-center gap-2 sm:gap-3 group shrink-0">
                    <div class="relative">
                        <div class="absolute -inset-0.5 bg-gradient-to-r from-teal-500 to-blue-600 rounded-full opacity-75 group-hover:opacity-100 transition duration-1000 blur"></div>
                        <img src="https://i.ibb.co/vxvYXs9h/IMG-20251126-173909.jpg" class="relative w-8 h-8 sm:w-10 sm:h-10 rounded-full border-2 border-black object-cover transform group-hover:scale-105 transition-transform" alt="PoorDogy Logo">
                    </div>
                    <div class="leading-tight block">
                        <h1 class="font-bold text-sm sm:text-lg tracking-tight group-hover:text-teal-400 transition-colors">PoorDogy</h1>
                    </div>
                </a>

                <!-- Center Title (Desktop Only - Hidden on Mobile) -->
                <div class="hidden md:flex items-center gap-2 bg-white/5 px-4 py-1.5 rounded-full border border-white/5">
                    <i class="fa-solid fa-bolt text-yellow-500"></i>
                    <span class="font-semibold text-sm tracking-wide">Dance<span class="text-teal-400">Gen</span> Turbo</span>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center gap-2 sm:gap-3">
                    <!-- Instagram Button (Icon Only on Mobile) -->
                    <a href="https://www.instagram.com/poordogy?igsh=MWNscnJxbWlhbnc1Ng==" target="_blank" 
                       class="flex items-center justify-center w-8 h-8 sm:w-auto sm:h-auto sm:px-4 sm:py-2 rounded-lg bg-gradient-to-br from-pink-600/90 to-purple-600/90 hover:from-pink-500 hover:to-purple-500 text-white font-bold text-xs transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.5)]">
                        <i class="fab fa-instagram sm:mr-2 text-sm"></i> 
                        <span class="hidden sm:inline">INSTA</span>
                    </a>

                    <!-- YouTube Button (Visible on Mobile) -->
                    <a href="https://www.youtube.com/@poordogy-c1p" target="_blank" 
                       class="flex items-center gap-1 sm:gap-2 bg-red-600/90 hover:bg-red-600 text-white px-2 py-1.5 sm:px-4 sm:py-2 rounded-lg text-[10px] sm:text-xs font-bold transition-all hover:shadow-[0_0_15px_rgba(220,38,38,0.5)]">
                        <i class="fab fa-youtube text-sm"></i> <span>SUBSCRIBE</span>
                    </a>
                    
                    <button id="logoutBtn" class="hidden text-xs bg-gray-800 hover:bg-gray-700 border border-gray-600 text-gray-300 px-3 py-2 rounded-lg transition" title="Logout">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex-grow flex items-center justify-center p-4 sm:p-6 lg:p-8 relative">
        
        <!-- LOGIN SECTION -->
        <div id="loginSection" class="w-full max-w-md animate-[float_6s_ease-in-out_infinite]">
            <div class="glass-panel p-8 rounded-3xl shadow-2xl relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-teal-500 to-transparent opacity-50"></div>
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-teal-500/20 to-blue-500/20 border border-white/10 mb-4">
                        <i class="fa-brands fa-google text-3xl text-white"></i>
                    </div>
                    <h2 class="text-3xl font-bold mb-2">Gemini Access</h2>
                    <p class="text-gray-400 text-sm">Initialize the AI Dance Engine securely.</p>
                </div>
                <form id="loginForm" class="space-y-5">
                    <div class="relative group">
                        <i class="fa-solid fa-key absolute left-4 top-4 text-gray-500 group-focus-within:text-teal-400 transition-colors"></i>
                        <input type="password" id="apiKeyInput" required placeholder="Paste your API Key here..." 
                            class="w-full glass-input rounded-xl px-12 py-3.5 text-sm placeholder-gray-500">
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-400 hover:to-blue-500 text-white font-bold py-4 rounded-xl shadow-lg transform hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex justify-center items-center gap-2 group">
                        <span>Initialize System</span>
                        <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
                <div class="mt-6 text-center">
                    <p class="text-[10px] text-gray-500 uppercase tracking-widest">Local Browser Storage Only</p>
                </div>
            </div>
        </div>

        <!-- APP INTERFACE -->
        <div id="appSection" class="hidden w-full max-w-[1400px] grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start">
            
            <!-- LEFT COLUMN: CONTROLS -->
            <div class="lg:col-span-4 space-y-6">
                <div class="glass-panel p-6 rounded-2xl border-t border-t-white/10">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-bold flex items-center text-white">
                            <i class="fa-solid fa-sliders text-teal-400 mr-2.5"></i> Configuration
                        </h2>
                        <span class="text-[10px] bg-teal-500/10 text-teal-400 border border-teal-500/20 px-2 py-1 rounded-md uppercase font-bold tracking-wider">v2.1 Turbo</span>
                    </div>

                    <form id="promptForm" class="space-y-5">
                        
                        <!-- Character Name Input (Default: dog boy) -->
                        <div class="space-y-1.5">
                            <label class="text-xs font-semibold text-teal-400 ml-1"><i class="fa-solid fa-user-astronaut mr-1"></i> CHARACTER NAME</label>
                            <input type="text" id="characterName" value="dog boy" placeholder="e.g. Cat Girl, Cyber Samurai..."
                                class="w-full glass-input rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-teal-500/50 text-teal-100 font-medium">
                            <p class="text-[10px] text-gray-500 ml-1">Default: dog boy (Optional)</p>
                        </div>

                        <!-- Brand Input (Default: poorDogy) -->
                        <div class="space-y-1.5">
                            <label class="text-xs font-semibold text-gray-400 ml-1">CHANNEL BRANDING</label>
                            <div class="relative">
                                <input type="text" id="brandInput" value="poorDogy" placeholder="Enter brand name..."
                                    class="w-full glass-input rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-teal-500/50">
                                <i class="fa-solid fa-tag absolute right-4 top-3.5 text-gray-600 text-xs"></i>
                            </div>
                            <p class="text-[10px] text-gray-500 ml-1">Default: poorDogy (Optional)</p>
                        </div>

                        <!-- AI Model & Duration -->
                        <div class="grid grid-cols-2 gap-3">
                            <div class="space-y-1.5">
                                <label class="text-xs font-semibold text-gray-400 ml-1">MODEL <span class="text-red-500">*</span></label>
                                <select id="aiModel" class="w-full glass-input rounded-lg px-3 py-3 text-sm cursor-pointer">
                                    <option value="Meta Movie Gen" data-duration="5">Meta Movie Gen</option>
                                    <option value="Grok" data-duration="6" selected>Grok (X.AI)</option>
                                    <option value="Veo3" data-duration="8">Google Veo 3</option>
                                    <option value="Sora" data-duration="5">OpenAI Sora</option>
                                    <option value="Kling" data-duration="5">Kling AI</option>
                                    <option value="Runway Gen-3" data-duration="10">Runway Gen-3</option>
                                </select>
                            </div>
                            <div class="space-y-1.5">
                                <label class="text-xs font-semibold text-gray-400 ml-1">DURATION</label>
                                <div class="w-full glass-input bg-white/5 rounded-lg px-3 py-3 text-sm flex items-center justify-between text-gray-300">
                                    <span id="durationDisplay">6s</span>
                                    <i class="fa-regular fa-clock text-teal-500/70"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Dance Style (Default: Bhangra) -->
                        <div class="grid grid-cols-3 gap-3">
                            <div class="col-span-2 space-y-1.5">
                                <label class="text-xs font-semibold text-gray-400 ml-1">DANCE STYLE <span class="text-red-500">*</span></label>
                                <input type="text" list="danceList" id="danceInput" value="Bhangra (India)" placeholder="Search Style..." 
                                    class="w-full glass-input rounded-lg px-4 py-3 text-sm">
                                <datalist id="danceList"></datalist>
                            </div>
                            <div class="space-y-1.5">
                                <label class="text-xs font-semibold text-gray-400 ml-1">NO. OF PROMPTS</label>
                                <input type="number" id="numPrompts" value="1" min="1" max="5" 
                                    class="w-full glass-input rounded-lg px-2 py-3 text-sm text-center">
                            </div>
                        </div>

                        <!-- Trends -->
                        <div class="space-y-1.5">
                            <label class="text-xs font-semibold text-teal-400 ml-1"><i class="fa-solid fa-fire mr-1"></i> VIRAL ERA <span class="text-red-500">*</span></label>
                            <select id="trendEra" class="w-full glass-input rounded-lg px-4 py-3 text-sm cursor-pointer border-teal-500/30">
                                <option value="Latest Trending (Default)" selected>Latest Viral Trends</option>
                            </select>
                        </div>

                        <!-- Speed -->
                        <div class="space-y-1.5">
                            <label class="text-xs font-semibold text-gray-400 ml-1">ENERGY LEVEL <span class="text-red-500">*</span></label>
                            <select id="danceSpeed" class="w-full glass-input rounded-lg px-4 py-3 text-sm cursor-pointer">
                                <option value="Fast" selected>Fast</option>
                                <option value="Very Fast">Very Fast</option>
                                <option value="Ultra Fast">Ultra Fast (Intense)</option>
                                <option value="High Energy">High Energy Remix</option>
                            </select>
                        </div>

                        <!-- Context -->
                        <div class="space-y-1.5">
                            <label class="text-xs font-semibold text-gray-400 ml-1">ENVIRONMENT (Optional)</label>
                            <textarea id="additionalContext" rows="2" placeholder="e.g., Cyberpunk street at night, neon rain..." 
                                class="w-full glass-input rounded-lg px-4 py-3 text-sm resize-none"></textarea>
                        </div>

                        <!-- System Status Box -->
                        <div class="bg-black/40 border border-teal-500/20 rounded-lg p-4 flex gap-3 items-center">
                            <div class="h-10 w-1 rounded bg-teal-500/50"></div>
                            <div class="text-xs text-teal-200/80 space-y-0.5">
                                <p><i class="fa-solid fa-video mr-1.5 opacity-50"></i>Quality: <strong>8K Ultra HD</strong></p>
                                <p><i class="fa-solid fa-bolt mr-1.5 opacity-50"></i>Mode: <strong>Street Battle</strong></p>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button type="submit" id="generateBtn" class="w-full bg-gradient-to-r from-teal-500 to-blue-600 hover:from-teal-400 hover:to-blue-500 text-white font-bold py-4 rounded-xl shadow-[0_0_20px_rgba(45,212,191,0.3)] transform hover:-translate-y-1 transition duration-300 flex justify-center items-center gap-3 text-sm uppercase tracking-wider">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> Generate Prompts
                        </button>
                    </form>
                </div>
            </div>

            <!-- RIGHT COLUMN: OUTPUT -->
            <div class="lg:col-span-8">
                
                <!-- Loading State -->
                <div id="loadingIndicator" class="hidden glass-panel h-[600px] rounded-2xl flex flex-col items-center justify-center text-center p-8">
                    <div class="relative w-24 h-24 mb-6">
                        <div class="absolute inset-0 rounded-full border-4 border-gray-700"></div>
                        <div class="absolute inset-0 rounded-full border-4 border-t-teal-500 border-r-transparent border-b-transparent border-l-transparent animate-spin"></div>
                        <div class="absolute inset-4 rounded-full border-4 border-gray-700 opacity-50"></div>
                        <div class="absolute inset-4 rounded-full border-4 border-t-blue-500 border-r-transparent border-b-transparent border-l-transparent animate-spin reverse-spin duration-700"></div>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-2 animate-pulse">Constructing Scene</h3>
                    <div class="space-y-1 font-mono text-xs text-teal-400/80">
                        <p>> Analyzing dance mechanics...</p>
                        <p>> Optimizing for 8K resolution...</p>
                        <p>> Generating viral metadata tags...</p>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="glass-panel h-[600px] rounded-2xl flex flex-col items-center justify-center text-center p-8 border-dashed border-2 border-gray-700/50">
                    <div class="w-20 h-20 bg-gray-800/50 rounded-full flex items-center justify-center mb-6 animate-float">
                        <i class="fa-solid fa-bolt text-4xl text-gray-600"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">Awaiting Input</h3>
                    <p class="text-gray-500 text-sm max-w-xs mx-auto">Configure your character and dance settings on the left to generate high-fidelity AI prompts.</p>
                </div>

                <!-- Results Container -->
                <div id="resultsContainer" class="hidden space-y-6">
                    
                    <!-- 1. Style Card -->
                    <div class="glass-panel p-1 rounded-2xl bg-gradient-to-r from-purple-500/20 to-indigo-500/20 border-purple-500/30">
                        <div class="bg-dark-card/80 backdrop-blur-sm rounded-xl p-5">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-bold text-purple-300 flex items-center gap-2">
                                    <i class="fa-solid fa-shirt"></i> Part 1: Character Style
                                </h3>
                                <button id="copyStyleBtn" class="text-xs bg-purple-500/20 hover:bg-purple-500/40 text-purple-200 px-3 py-1.5 rounded transition border border-purple-500/30 flex items-center gap-1">
                                    <i class="fa-regular fa-copy"></i> Copy
                                </button>
                            </div>
                            <div class="bg-black/40 rounded-lg p-4 font-mono text-sm text-gray-300 whitespace-pre-line leading-relaxed border border-white/5" id="stylePromptContent"></div>
                        </div>
                    </div>

                    <!-- 2. Social Metadata Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        
                        <!-- Instagram -->
                        <div class="glass-panel rounded-2xl overflow-hidden border-pink-500/20">
                            <div class="bg-gradient-to-r from-pink-900/40 to-purple-900/40 p-4 border-b border-white/5 flex items-center gap-2">
                                <i class="fa-brands fa-instagram text-xl text-pink-400"></i>
                                <span class="font-bold text-pink-100 text-sm">Instagram Reels</span>
                            </div>
                            <div class="p-5 space-y-4">
                                <div>
                                    <label class="text-[10px] uppercase text-gray-500 font-bold mb-1.5 block tracking-wider">Title / Caption</label>
                                    <div class="relative group">
                                        <div id="instaTitle" class="bg-black/30 rounded-lg p-3 text-xs text-gray-300 pr-10 min-h-[50px] whitespace-pre-wrap border border-white/5 font-mono"></div>
                                        <button onclick="robustCopy(document.getElementById('instaTitle').innerText, this)" class="absolute top-2 right-2 text-gray-500 hover:text-white p-1.5 transition opacity-0 group-hover:opacity-100 bg-gray-800/80 rounded">
                                            <i class="fa-regular fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-[10px] uppercase text-gray-500 font-bold mb-1.5 block tracking-wider">Pinned Comment</label>
                                    <div class="relative group">
                                        <div id="instaComment" class="bg-black/30 rounded-lg p-3 text-xs text-gray-300 pr-10 min-h-[40px] whitespace-pre-wrap border border-white/5 font-mono"></div>
                                        <button onclick="robustCopy(document.getElementById('instaComment').innerText, this)" class="absolute top-2 right-2 text-gray-500 hover:text-white p-1.5 transition opacity-0 group-hover:opacity-100 bg-gray-800/80 rounded">
                                            <i class="fa-regular fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- YouTube -->
                        <div class="glass-panel rounded-2xl overflow-hidden border-red-500/20">
                            <div class="bg-gradient-to-r from-red-900/40 to-orange-900/40 p-4 border-b border-white/5 flex items-center gap-2">
                                <i class="fa-brands fa-youtube text-xl text-red-500"></i>
                                <span class="font-bold text-red-100 text-sm">YouTube Shorts</span>
                            </div>
                            <div class="p-5 space-y-4">
                                <div>
                                    <label class="text-[10px] uppercase text-gray-500 font-bold mb-1.5 block tracking-wider">Video Title</label>
                                    <div class="relative group">
                                        <div id="ytTitle" class="bg-black/30 rounded-lg p-3 text-xs text-gray-300 pr-10 min-h-[40px] whitespace-pre-wrap border border-white/5 font-mono"></div>
                                        <button onclick="robustCopy(document.getElementById('ytTitle').innerText, this)" class="absolute top-2 right-2 text-gray-500 hover:text-white p-1.5 transition opacity-0 group-hover:opacity-100 bg-gray-800/80 rounded">
                                            <i class="fa-regular fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-[10px] uppercase text-gray-500 font-bold mb-1.5 block tracking-wider">SEO Tags</label>
                                        <div class="relative group">
                                            <div id="ytSeoTags" class="bg-black/30 rounded-lg p-3 text-xs text-gray-300 pr-8 h-[80px] overflow-y-auto whitespace-pre-wrap border border-white/5 font-mono custom-scroll"></div>
                                            <button onclick="robustCopy(document.getElementById('ytSeoTags').innerText, this)" class="absolute top-2 right-2 text-gray-500 hover:text-white p-1.5 transition opacity-0 group-hover:opacity-100 bg-gray-800/80 rounded">
                                                <i class="fa-regular fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="text-[10px] uppercase text-gray-500 font-bold mb-1.5 block tracking-wider">Description</label>
                                        <div class="relative group">
                                            <div id="ytDescription" class="bg-black/30 rounded-lg p-3 text-xs text-gray-300 pr-8 h-[80px] overflow-y-auto whitespace-pre-wrap border border-white/5 font-mono custom-scroll"></div>
                                            <button onclick="robustCopy(document.getElementById('ytDescription').innerText, this)" class="absolute top-2 right-2 text-gray-500 hover:text-white p-1.5 transition opacity-0 group-hover:opacity-100 bg-gray-800/80 rounded">
                                                <i class="fa-regular fa-copy"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Video Prompts List -->
                    <div>
                        <h3 class="font-bold text-teal-400 mb-4 flex items-center gap-2 px-1">
                            <i class="fa-solid fa-video"></i> Part 2: Motion Prompts
                        </h3>
                        <div id="videoPromptsList" class="space-y-4">
                            <!-- JS Injection -->
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </main>

    <!-- CHAT ASSISTANT WIDGET -->
    <div id="chatWidget" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 flex flex-col items-end gap-4">
        
        <!-- Chat Window -->
        <div id="chatWindow" class="hidden w-[90vw] sm:w-[350px] h-[60vh] sm:h-[500px] glass-panel rounded-2xl flex flex-col overflow-hidden shadow-2xl animate-slide-up border border-teal-500/20 transition-all duration-300">
            <!-- Header -->
            <div class="bg-gradient-to-r from-teal-900/80 to-blue-900/80 p-4 border-b border-white/10 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <img src="https://i.ibb.co/vxvYXs9h/IMG-20251126-173909.jpg" class="w-8 h-8 rounded-full object-cover border border-white/20" alt="Assistant Profile">
                    <div>
                        <h4 class="font-bold text-sm text-white">poorDogy Assistant</h4>
                        <span class="text-[10px] text-teal-300 flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> Online</span>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="toggleMaximize()" class="text-gray-400 hover:text-white transition" title="Maximize">
                        <i id="maxIcon" class="fa-regular fa-square"></i>
                    </button>
                    <button onclick="toggleChat()" class="text-gray-400 hover:text-white transition" title="Close">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
            </div>

            <!-- Messages Area -->
            <div id="chatMessages" class="flex-grow p-4 overflow-y-auto space-y-3 bg-black/20">
                <div class="flex justify-start">
                    <div class="chat-bubble-ai p-3 text-xs max-w-[85%]">
                        Hello! I'm poorDogy AI. I'm powered by Gemini and can help you with anything! Ask me about dance prompts, coding, life advice, or anything else.
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-3 border-t border-white/10 bg-black/30">
                <form id="chatForm" class="flex gap-2">
                    <input type="text" id="chatInput" placeholder="Ask anything..." class="flex-grow glass-input rounded-full px-4 py-2 text-xs focus:ring-1 focus:ring-teal-500">
                    <button type="submit" class="w-8 h-8 rounded-full bg-teal-500 hover:bg-teal-400 text-white flex items-center justify-center transition shadow-lg">
                        <i class="fa-solid fa-paper-plane text-xs"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Toggle Button -->
        <button onclick="toggleChat()" class="w-14 h-14 rounded-full bg-gradient-to-br from-teal-500 to-blue-600 text-white shadow-xl hover:scale-105 transition-transform flex items-center justify-center group relative">
            <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-black"></span>
            <i class="fa-solid fa-comment-dots text-2xl group-hover:animate-pulse"></i>
        </button>
    </div>

    <!-- FOOTER -->
    <footer class="border-t border-white/5 bg-black/20 py-6 mt-auto">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-xs text-gray-500">&copy; 2025 PoorDogy AI Labs. All rights reserved.</p>
            <div class="flex gap-4">
                <a href="https://www.youtube.com/@poordogy-c1p" target="_blank" class="text-gray-500 hover:text-red-500 transition transform hover:scale-110"><i class="fa-brands fa-youtube text-lg"></i></a>
                <a href="https://www.instagram.com/poordogy?igsh=MWNscnJxbWlhbnc1Ng==" target="_blank" class="text-gray-500 hover:text-pink-500 transition transform hover:scale-110"><i class="fa-brands fa-instagram text-lg"></i></a>
            </div>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- Data ---
        const danceDatabase = [
            // ðŸ”¥ Worldwide Most Famous & Trending
            { name: "Hip Hop", country: "USA" },
            { name: "Breakdancing", country: "USA" },
            { name: "Ballet", country: "France/Russia" },
            { name: "Salsa", country: "Cuba" },
            { name: "Tango", country: "Argentina" },
            { name: "Belly Dance", country: "Middle East" },
            { name: "Flamenco", country: "Spain" },
            { name: "K-Pop Choreography", country: "Korea" },
            { name: "Reggaeton", country: "Puerto Rico" },
            { name: "Dancehall", country: "Jamaica" },
            { name: "Zumba", country: "Global" },
            { name: "Shuffle Dance (Melbourne Shuffle)", country: "Australia" },
            { name: "Afrobeat", country: "West Africa" },
            { name: "Bollywood Dance", country: "India" },
            { name: "Contemporary", country: "Global" },

            // ðŸŒ Famous Partner/Club Dances
            { name: "Bachata", country: "Dominican Republic" },
            { name: "Merengue", country: "Dominican Republic" },
            { name: "Cha-Cha-Cha", country: "Cuba" },
            { name: "Foxtrot", country: "USA" },
            { name: "Quickstep", country: "UK" },
            { name: "Waltz", country: "Austria" },
            { name: "Jive", country: "USA/UK" },
            { name: "Samba", country: "Brazil" },
            { name: "Samba de Gafieira", country: "Brazil" },
            { name: "Lambada", country: "Brazil" },

            // ðŸ‡®ðŸ‡³ India's Famous Classical & Folk Dances
            { name: "Bharatanatyam", country: "India" },
            { name: "Kathak", country: "India" },
            { name: "Kathakali", country: "India" },
            { name: "Kuchipudi", country: "India" },
            { name: "Odissi", country: "India" },
            { name: "Sattriya", country: "India" },
            { name: "Manipuri", country: "India" },
            { name: "Mohiniyattam", country: "India" },
            { name: "Chhau", country: "India" },
            { name: "Lavani", country: "India" },
            { name: "Koli", country: "India" },
            { name: "Lezim", country: "India" },
            { name: "Bhangra", country: "India" },
            { name: "Giddha", country: "India" },
            { name: "Garba", country: "India" },
            { name: "Dandiya Raas", country: "India" },
            { name: "Ghoomar", country: "India" },
            { name: "Kalbelia", country: "India" },
            { name: "Bihu", country: "India" },
            { name: "Yakshagana", country: "India" },

            // ðŸ‡¨ðŸ‡³ China, Japan, Korea
            { name: "Dragon Dance", country: "China" },
            { name: "Lion Dance", country: "China" },
            { name: "Yangge", country: "China" },
            { name: "Kabuki", country: "Japan" },
            { name: "Buchaechum (Fan Dance)", country: "Korea" },
            { name: "Talchum", country: "Korea" },

            // ðŸŒ Southeast Asia
            { name: "Tinikling", country: "Philippines" },
            { name: "Balinese Legong", country: "Indonesia" },
            { name: "Jaipongan", country: "Indonesia" },
            { name: "Tahitian Ori", country: "Tahiti" },
            { name: "Hula", country: "Hawaii" },

            // ðŸ‡ªðŸ‡º Europe Folk & Classical
            { name: "Polka", country: "Czech Republic" },
            { name: "Cancan", country: "France" },
            { name: "Tarantella", country: "Italy" },
            { name: "Syrtaki", country: "Greece" },
            { name: "Mazurka", country: "Poland" },
            { name: "Fandango", country: "Portugal/Spain" },
            { name: "Irish Stepdance", country: "Ireland" },
            { name: "Ceilidh Dance", country: "Scotland" },
            { name: "Highland Dance", country: "Scotland" },

            // ðŸ‡·ðŸ‡º Russia & Eastern Europe
            { name: "Barynya", country: "Russia" },
            { name: "Cossack Dance (Hopak)", country: "Ukraine/Russia" },

            // ðŸŒ Middle East & Africa
            { name: "Halay", country: "Turkey" },
            { name: "Whirling Dervish (Sema)", country: "Turkey" },
            { name: "Eskista", country: "Ethiopia" },
            { name: "Gwara Gwara", country: "South Africa" },
            { name: "Indlamu", country: "South Africa" },
            { name: "Adumu (Jumping Dance)", country: "Kenya/Tanzania" },
            { name: "Kizomba", country: "Angola" },
            { name: "Kpanlogo", country: "Ghana" },
            { name: "Dabke", country: "Lebanon/Syria/Jordan" },

            // ðŸ‡³ðŸ‡¿ New Zealand
            { name: "Haka", country: "New Zealand" },
            { name: "Poi", country: "New Zealand" },

            // ðŸ‡§ðŸ‡· Brazil
            { name: "Capoeira", country: "Brazil" },
            { name: "ForrÃ³", country: "Brazil" },
            { name: "Samba Reggae", country: "Brazil" },
            { name: "Bumba Meu Boi", country: "Brazil" },

            // ðŸ‡ºðŸ‡¸ USA More Dance Forms
            { name: "Lindy Hop", country: "USA" },
            { name: "Charleston", country: "USA" },
            { name: "Tap Dance", country: "USA" },
            { name: "Square Dance", country: "USA" },
            { name: "Voguing", country: "USA" },
            { name: "Krumping", country: "USA" },

            // ðŸŒ Viral Internet Dances
            { name: "Viral TikTok Dance", country: "Global" }
        ];



        // --- DOM Elements ---
        const loginSection = document.getElementById('loginSection');
        const appSection = document.getElementById('appSection');
        const loginForm = document.getElementById('loginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const promptForm = document.getElementById('promptForm');
        const aiModelSelect = document.getElementById('aiModel');
        const durationDisplay = document.getElementById('durationDisplay');
        const danceList = document.getElementById('danceList');
        const trendEraSelect = document.getElementById('trendEra');
        
        const loadingIndicator = document.getElementById('loadingIndicator');
        const resultsContainer = document.getElementById('resultsContainer');
        const emptyState = document.getElementById('emptyState');
        const stylePromptContent = document.getElementById('stylePromptContent');
        const videoPromptsList = document.getElementById('videoPromptsList');
        const copyStyleBtn = document.getElementById('copyStyleBtn');

        const instaTitle = document.getElementById('instaTitle');
        const instaComment = document.getElementById('instaComment');
        const ytTitle = document.getElementById('ytTitle');
        const ytComment = document.getElementById('ytComment');
        const ytSeoTags = document.getElementById('ytSeoTags');
        const ytDescription = document.getElementById('ytDescription');

        // Chat Elements
        const chatWindow = document.getElementById('chatWindow');
        const chatForm = document.getElementById('chatForm');
        const chatInput = document.getElementById('chatInput');
        const chatMessages = document.getElementById('chatMessages');
        const maxIcon = document.getElementById('maxIcon');

        let apiKey = localStorage.getItem('gemini_api_key');

        function showToast(message, type = 'info') {
            const existingToasts = document.querySelectorAll('.custom-toast');
            existingToasts.forEach(t => t.remove());

            const toast = document.createElement('div');
            toast.className = `custom-toast fixed bottom-24 right-6 px-6 py-4 rounded-xl shadow-2xl z-50 transition-all duration-300 opacity-0 translate-y-10 flex items-center gap-3 border backdrop-blur-md ${type === 'error' ? 'bg-red-900/90 text-white border-red-500' : 'bg-gray-800/90 text-teal-400 border-teal-500'}`;
            toast.innerHTML = `<i class="fa-solid ${type === 'error' ? 'fa-circle-exclamation' : 'fa-circle-check'} text-lg"></i> <span class="text-sm font-semibold tracking-wide">${message}</span>`;
            document.body.appendChild(toast);

            requestAnimationFrame(() => {
                toast.classList.remove('opacity-0', 'translate-y-10');
            });

            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-10');
                setTimeout(() => {
                    if(toast.parentNode) toast.parentNode.removeChild(toast);
                }, 300);
            }, 3000);
        }

        function init() {
            populateDanceList();
            populateTrendYears();
            checkLoginStatus();
            updateDuration();
        }

        function populateDanceList() {
            danceDatabase.sort((a, b) => a.name.localeCompare(b.name));
            danceList.innerHTML = danceDatabase.map(d => 
                `<option value="${d.name} (${d.country})">`
            ).join('');
        }

        function populateTrendYears() {
            for (let year = 2025; year >= 2010; year--) {
                const option = document.createElement('option');
                option.value = `Viral steps from ${year}`;
                option.text = `Best Moves of ${year}`;
                trendEraSelect.appendChild(option);
            }
        }

        function checkLoginStatus() {
            if (apiKey) {
                loginSection.classList.add('hidden');
                appSection.classList.remove('hidden');
                logoutBtn.classList.remove('hidden');
            } else {
                loginSection.classList.remove('hidden');
                appSection.classList.add('hidden');
                logoutBtn.classList.add('hidden');
            }
        }

        function updateDuration() {
            const selectedOption = aiModelSelect.options[aiModelSelect.selectedIndex];
            if (selectedOption && durationDisplay) {
                const duration = selectedOption.getAttribute('data-duration');
                durationDisplay.innerText = `${duration}s`;
            }
        }

        function robustCopy(text, btnElement) {
            let iconElement;
            if (btnElement.tagName === 'BUTTON') {
                iconElement = btnElement;
            } else {
                return;
            }
            
            const originalHTML = iconElement.innerHTML;
            const showSuccess = () => {
                iconElement.innerHTML = '<i class="fa-solid fa-check text-green-400"></i>';
                setTimeout(() => iconElement.innerHTML = originalHTML, 2000);
                showToast("Copied to clipboard!", "success");
            };

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(showSuccess).catch(err => fallbackCopy(text));
            } else {
                fallbackCopy(text);
            }

            function fallbackCopy(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showSuccess();
                } catch (err) {
                    showToast("Copy failed. Please copy manually.", "error");
                }
                document.body.removeChild(textArea);
            }
        }

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const key = apiKeyInput.value.trim();
            if (key) {
                apiKey = key;
                localStorage.setItem('gemini_api_key', key);
                checkLoginStatus();
                apiKeyInput.value = '';
                showToast("System Access Granted.");
            }
        });

        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('gemini_api_key');
            apiKey = null;
            checkLoginStatus();
            resetUI();
            showToast("Session Terminated.");
        });

        aiModelSelect.addEventListener('change', updateDuration);
        
        copyStyleBtn.addEventListener('click', function() {
            if(stylePromptContent) robustCopy(stylePromptContent.innerText, this);
        });

        function resetUI() {
            if(resultsContainer) resultsContainer.classList.add('hidden');
            if(emptyState) emptyState.classList.remove('hidden');
            if(loadingIndicator) loadingIndicator.classList.add('hidden');
        }

        // --- Chat Functions ---
        function toggleChat() {
            chatWindow.classList.toggle('hidden');
            if (!chatWindow.classList.contains('hidden')) {
                chatInput.focus();
            }
        }

        function toggleMaximize() {
            chatWindow.classList.toggle('chat-maximized');
            // Toggle Icon
            if (chatWindow.classList.contains('chat-maximized')) {
                maxIcon.classList.remove('fa-square');
                maxIcon.classList.add('fa-window-restore');
            } else {
                maxIcon.classList.remove('fa-window-restore');
                maxIcon.classList.add('fa-square');
            }
        }

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const message = chatInput.value.trim();
            if (!message) return;

            // Add User Message
            addMessage(message, 'user');
            chatInput.value = '';

            // Loading bubble
            const loadingId = addMessage('Thinking...', 'ai', true);

            try {
                if (!apiKey) throw new Error("Please log in with API Key first.");
                
                // Broad system prompt for general assistance
                const systemPrompt = `You are poorDogy Assistant, a helpful and cool AI powered by Gemini. You can answer ANY question on ANY topic, not just dance. Keep your answers SHORT, SIMPLE, ACCURATE, and CONCISE. Avoid long paragraphs.`;
                
                const responseData = await callGeminiChat(message, systemPrompt);
                
                // Remove loading, add response
                const loadingBubble = document.getElementById(loadingId);
                if(loadingBubble) loadingBubble.remove();
                addMessage(responseData, 'ai');

            } catch (error) {
                const loadingBubble = document.getElementById(loadingId);
                if(loadingBubble) loadingBubble.remove();
                addMessage("Error: " + error.message, 'ai');
            }
        });

        function addMessage(text, sender, isLoading = false) {
            const div = document.createElement('div');
            div.className = `flex justify-${sender === 'user' ? 'end' : 'start'}`;
            const id = 'msg-' + Date.now();
            div.id = id;
            
            div.innerHTML = `
                <div class="${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'} p-3 text-xs max-w-[85%] ${isLoading ? 'animate-pulse' : ''}">
                    ${text}
                </div>
            `;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return id;
        }

        async function callGeminiChat(userMsg, sysPrompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: userMsg }] }],
                systemInstruction: { parts: [{ text: sysPrompt }] }
            };

            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        // --- Main Generator Logic ---

        promptForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // --- VALIDATION ---
            const danceInput = document.getElementById('danceInput');
            if (!danceInput.value.trim()) {
                showToast("Please select a Dance Style!", "error");
                danceInput.classList.add('error-border');
                danceInput.focus();
                setTimeout(() => danceInput.classList.remove('error-border'), 2000);
                return;
            }

            emptyState.classList.add('hidden');
            resultsContainer.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            generateBtn.classList.add('opacity-50', 'cursor-not-allowed');

            const numPrompts = document.getElementById('numPrompts').value;
            const model = aiModelSelect.value;
            const duration = aiModelSelect.options[aiModelSelect.selectedIndex].getAttribute('data-duration');
            const dance = danceInput.value;
            const speed = document.getElementById('danceSpeed').value;
            const trend = trendEraSelect.value;
            const context = document.getElementById('additionalContext').value;
            const brandName = document.getElementById('brandInput').value.trim();
            const characterName = document.getElementById('characterName').value.trim() || "dog boy";

            let brandingInstruction = "";
            let seoBrandTag = "";
            
            if (brandName) {
                brandingInstruction = `MUST include text branding: '(YouTube Icon) ${brandName} (Instagram Icon)' with high contrast colors`;
                seoBrandTag = `"${brandName}", "${brandName} dance", "${brandName} shorts"`;
            } else {
                brandingInstruction = "Do NOT include any text, logos, or writing on the outfit. Keep the outfit clean of text";
                seoBrandTag = `"dance", "viral dance", "trending dance"`;
            }

            const systemPrompt = `
                You are an expert Creative Director and AI Prompt Engineer.

                **Objective:**
                1. Create ONE "Style & Makeover Prompt" following a STRICT format.
                2. Create EXACTLY ${numPrompts} "Video Motion Prompt(s)" for the dance action. Do not generate more or less than ${numPrompts}.
                3. Create Social Media Metadata for Instagram and YouTube.

                **INPUTS:**
                - Character: ${characterName}
                - Dance Style: ${dance} (Apply a STREET DANCE / COMPETITIVE BATTLE aesthetic to this style)
                - Trend: ${trend}
                - Context: ${context}
                - Speed: ${speed} (Must be FAST/ENERGETIC)
                - Branding: ${brandName ? brandName : "No Branding"}

                **PART 1: STYLE & MAKEOVER PROMPT (STRICT FORMAT)**
                You must generate a prompt string that follows this EXACT structure line-by-line. 
                CRITICAL RULE: Do not use pronouns like he/she/it. ALWAYS refer to the character as "${characterName}".
                CRITICAL RULE: The colors and style of the dress, cap, and shoes MUST be culturally accurate and specific to the selected '${dance}' style.
                
                Structure:
                "here is my ${characterName} image and i want to change the background , dress, shoes, cap
                
                background: [Describe a high-quality setting matching '${context}']
                dress : ${characterName} should wearing [Design a specific outfit with colors and style TRADITIONAL or TYPICAL for '${dance}'. ${brandingInstruction}]. ${characterName} is standing in mountain pose (tadasana) and camera is in front.
                shoes ${characterName} should wearing [Describe shoes matching the '${dance}' culture/style and outfit colors]
                cap:  ${characterName} should wearing [Describe a cap, hat, or headgear matching the '${dance}' culture/style and outfit colors]"

                **PART 2: VIDEO MOTION PROMPTS - CRITICAL RULES**
                
                1. **MUSIC CONSTANT:** You MUST select ONE specific high-energy, fast-tempo song title or specific beat style suitable for '${dance}'.
                   - **CRITICAL:** You MUST write this EXACT song title in EVERY SINGLE video prompt generated below. 
                
                2. **CONTEXT & QUALITY:** - The dance must be presented as a **Street Dance Battle** or **High-Stakes Competition** performance.
                   - **Quality:** MUST include "8k resolution, cinematic lighting, photorealistic, 8k" in every prompt.
                   - **Duration:** Do NOT include any specific time duration in the text.

                3. **ENERGY LEVEL:** The dance MUST be HIGH ENERGY, FAST, and AGGRESSIVE. 

                4. **Structure per Prompt:**
                   - **Music:** [Full Song Name/Genre]
                   - **Action:** Describe fast, energetic '${dance}' moves merged with street/competitive flair using "${characterName}" as the subject.
                   - **Visuals:** 8k resolution, cinematic lighting.
                   - **Flow:** Continuous, seamless transitions. 

                **PART 3: SOCIAL MEDIA METADATA**
                - **Instagram:**
                    1. **Title:** Mix of Catchy Title + 5-7 Relevant Hashtags + Emojis.
                    2. **Pin Comment:** Engaging question or call to action related to '${dance}'.
                - **YouTube:**
                    1. **Title:** Mix of SEO-friendly Title + 3 Hashtags + Emojis.
                    2. **Pin Comment:** Call to subscribe and check bio.
                    3. **SEO Tags:** Comma-separated list of 20+ keywords. MUST INCLUDE EXACTLY: ${seoBrandTag}, "${characterName}", "${characterName} Dance", "AI Video", "AI Dance", "Shorts", "YtShorts", "Viral", "Trending", "fyp". PLUS specific keywords related to '${dance}'.
                    4. **Description:**
                        Line 1: The Full Title from point 1.
                        Line 2: [Blank Line]
                        Line 3: A short 2-sentence description of the dance and the ${characterName} character.
                        Line 4: [Blank Line]
                        Line 5+: A VERTICAL list of 10+ Hashtags (one per line, starting with #).
                
                **OUTPUT FORMAT (STRICT JSON):**
                Return ONLY a JSON object with this structure:
                {
                    "style_prompt": "The full formatted string from Part 1, preserving line breaks",
                    "video_prompts": ["Motion Prompt 1...", "Motion Prompt 2..."],
                    "instagram": {
                        "title": "Title text...",
                        "pin_comment": "Comment text..."
                    },
                    "youtube": {
                        "title": "Title text...",
                        "pin_comment": "Comment text...",
                        "seo_tags": "tag1, tag2, ...",
                        "description": "Description text..."
                    }
                }
            `;

            try {
                const result = await callGemini(systemPrompt);
                renderOutput(result);
                showToast("Generation Successful!", "success");
            } catch (error) {
                showToast("API Error: " + error.message, "error");
                resetUI();
            } finally {
                loadingIndicator.classList.add('hidden');
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        });

        async function callGemini(promptText) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: promptText }] }],
                generationConfig: { temperature: 0.8, response_mime_type: "application/json" }
            };

            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) throw new Error("API Request Failed. Check your Key.");
            const data = await response.json();
            const text = data.candidates[0].content.parts[0].text;
            return JSON.parse(text);
        }

        function renderOutput(data) {
            if (stylePromptContent) stylePromptContent.innerText = data.style_prompt || "Error generating style prompt.";
            
            if (videoPromptsList) {
                videoPromptsList.innerHTML = '';
                const prompts = data.video_prompts || [];
                
                prompts.forEach((text, index) => {
                    const card = document.createElement('div');
                    card.className = 'glass-panel rounded-xl p-5 relative group border-l-4 border-l-teal-500 hover:border-l-blue-500 transition-all';
                    
                    const p = document.createElement('p');
                    p.className = 'text-sm text-gray-300 pr-10 font-mono leading-relaxed';
                    p.innerText = text;

                    const btn = document.createElement('button');
                    btn.className = 'absolute top-3 right-3 p-2 text-gray-500 hover:text-white bg-black/40 hover:bg-teal-500 rounded-lg transition-colors';
                    btn.innerHTML = '<i class="fa-regular fa-copy"></i>';
                    btn.addEventListener('click', function() { robustCopy(text, this); });

                    const badge = document.createElement('span');
                    badge.className = 'absolute bottom-3 right-3 text-[10px] text-teal-400 font-bold bg-teal-500/10 border border-teal-500/20 px-2 py-0.5 rounded uppercase tracking-wider';
                    badge.innerText = `PROMPT ${index + 1}`;

                    card.appendChild(p);
                    card.appendChild(btn);
                    card.appendChild(badge);
                    videoPromptsList.appendChild(card);
                });
            }

            if (data.instagram) {
                if(instaTitle) instaTitle.innerText = data.instagram.title || "No title generated";
                if(instaComment) instaComment.innerText = data.instagram.pin_comment || "No comment generated";
            }
            if (data.youtube) {
                if(ytTitle) ytTitle.innerText = data.youtube.title || "No title generated";
                if(ytComment) ytComment.innerText = data.youtube.pin_comment || "No comment generated";
                if(ytSeoTags) ytSeoTags.innerText = data.youtube.seo_tags || "No tags generated";
                if(ytDescription) ytDescription.innerText = data.youtube.description || "No description generated";
            }

            if(resultsContainer) resultsContainer.classList.remove('hidden');
        }

        init();
    </script>
</body>
</html>
